
@inherits LayoutComponentBase

@* Required *@
<MudThemeProvider Theme="_currentTheme" @bind-IsDarkMode="_isDarkMode" />
<MudPopoverProvider />

@* Needed for dialogs *@
<MudDialogProvider />

@* Needed for snackbars *@
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1" Color="Color.Primary">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => DrawerToggle())" />
        <MudText Typo="Typo.h5" Class="ml-3">POS System</MudText>
        <MudSpacer />
         <MudText Typo="Typo.body1" Style="color: white; margin-right: 16px;">
            <AuthLinks/>
        </MudText>
        <MudToggleIconButton @bind-Toggled="@_isDarkMode" 
        Icon="@Icons.Material.Filled.DarkMode" Color="Color.Inherit" title="Dark Mode"
        ToggledIcon="@Icons.Material.Filled.LightMode" ToggledColor="Color.Warning" Class="ml-4"/>
    </MudAppBar>
    <MudDrawer  @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="2">
        <NavMenu />
    </MudDrawer>
    <MudMainContent>
       <MudContainer MaxWidth="MaxWidth.Large" Class="my-4 pt-4">
            @Body
       </MudContainer>
      
    </MudMainContent>
</MudLayout>


@code{

    bool _drawerOpen = true;
    bool _isDarkMode = false;
    MudTheme _currentTheme = new MudTheme();

    protected override void OnInitialized()
    {

        _currentTheme = new MudTheme()
        {
            PaletteLight = new PaletteLight()
            {
                Primary = "#594AE2",
                Secondary = "#E91E63",
                AppbarBackground = "#594AE2"
            },
            PaletteDark = new PaletteDark()
            {
                Primary = "#7E6FFF",
                Secondary = "#F48FB1",
                AppbarBackground = "#1E1E2D"
            },
            Typography = new Typography()
            {
                Default = new DefaultTypography() {FontFamily = new[] { "Outfit", "Helvetica", "Arial", "sans-serif"} }
            },
            LayoutProperties = new LayoutProperties()
            {
                DefaultBorderRadius = "12px"
            }
        };

    }

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }
}